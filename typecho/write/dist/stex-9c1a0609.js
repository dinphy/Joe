function mkStex(t){function a(t,e){t.cmdState.push(e)}function i(t){return 0<t.cmdState.length?t.cmdState[t.cmdState.length-1]:null}function e(t,e,n){return function(){this.name=t,this.bracketNo=0,this.style=e,this.styles=n,this.argument=null,this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}var c={};function u(t,e){t.f=e}function r(t,e){if(t.match(/^\\[a-zA-Z@]+/)){var n,r=t.current().slice(1);return a(e,n=new(n=c.hasOwnProperty(r)?c[r]:c.DEFAULT)),u(e,m),n.style}if(t.match(/^\\[$&%#{}_]/))return"tag";if(t.match(/^\\[,;!\/\\]/))return"tag";if(t.match("\\["))return u(e,function(t,e){return o(t,e,"\\]")}),"keyword";if(t.match("\\("))return u(e,function(t,e){return o(t,e,"\\)")}),"keyword";if(t.match("$$"))return u(e,function(t,e){return o(t,e,"$$")}),"keyword";if(t.match("$"))return u(e,function(t,e){return o(t,e,"$")}),"keyword";r=t.next();return"%"==r?(t.skipToEnd(),"comment"):"}"==r||"]"==r?(n=i(e))?(n.closeBracket(r),u(e,m),"bracket"):"error":"{"==r||"["==r?(a(e,n=new(n=c.DEFAULT)),"bracket"):/\d/.test(r)?(t.eatWhile(/[\w.%]/),"atom"):(t.eatWhile(/[\w\-_]/),"begin"==(n=function(t){for(var e=t.cmdState,n=e.length-1;0<=n;n--){var r=e[n];if("DEFAULT"!=r.name)return r}return{styleIdentifier:function(){return null}}}(e)).name&&(n.argument=t.current()),n.styleIdentifier())}function o(t,e,n){if(t.eatSpace())return null;if(n&&t.match(n))return u(e,r),"keyword";if(t.match(/^\\[a-zA-Z@]+/))return"tag";if(t.match(/^[a-zA-Z]+/))return"variableName.special";if(t.match(/^\\[$&%#{}_]/))return"tag";if(t.match(/^\\[,;!\/]/))return"tag";if(t.match(/^[\^_&]/))return"tag";if(t.match(/^[+\-<>|=,\/@!*:;'"`~#?]/))return null;if(t.match(/^(\d+\.\d*|\d*\.\d+|\d+)/))return"number";e=t.next();return"{"==e||"}"==e||"["==e||"]"==e||"("==e||")"==e?"bracket":"%"==e?(t.skipToEnd(),"comment"):"error"}function m(t,e){var n=t.peek();return"{"==n||"["==n?(i(e).openBracket(n),t.eat(n),u(e,r),"bracket"):/[ \t\r]/.test(n)?(t.eat(n),null):(u(e,r),(n=(n=e).cmdState.pop())&&n.closeBracket(),r(t,e))}return c.importmodule=e("importmodule","tag",["string","builtin"]),c.documentclass=e("documentclass","tag",["","atom"]),c.usepackage=e("usepackage","tag",["atom"]),c.begin=e("begin","tag",["atom"]),c.end=e("end","tag",["atom"]),c.label=e("label","tag",["atom"]),c.ref=e("ref","tag",["atom"]),c.eqref=e("eqref","tag",["atom"]),c.cite=e("cite","tag",["atom"]),c.bibitem=e("bibitem","tag",["atom"]),c.Bibitem=e("Bibitem","tag",["atom"]),c.RBibitem=e("RBibitem","tag",["atom"]),c.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=this.openBracket=this.closeBracket=function(){}},{startState:function(){return{cmdState:[],f:t?function(t,e){return o(t,e)}:r}},copyState:function(t){return{cmdState:t.cmdState.slice(),f:t.f}},token:function(t,e){return e.f(t,e)},blankLine:function(t){t.f=r,t.cmdState.length=0},languageData:{commentTokens:{line:"%"}}}}const stex=mkStex(!1),stexMath=mkStex(!0);export{stex,stexMath};
